<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Scouting Report Predictability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="scouting-predictability_files/libs/clipboard/clipboard.min.js"></script>
<script src="scouting-predictability_files/libs/quarto-html/quarto.js"></script>
<script src="scouting-predictability_files/libs/quarto-html/popper.min.js"></script>
<script src="scouting-predictability_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="scouting-predictability_files/libs/quarto-html/anchor.min.js"></script>
<link href="scouting-predictability_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="scouting-predictability_files/libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="scouting-predictability_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="scouting-predictability_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="scouting-predictability_files/libs/bootstrap/bootstrap-0c0d067c63a94b5a80f13995d724bf53.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Scouting Report Predictability</h1>
<p class="subtitle lead">How the Words of One NFL Insider Relate to a Player’s Chance to Go in the First</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Professional sports “insiders” are paid a lot of money for their insights and analysis on the game they claim to know. But how much of what they say actually holds up in practice? Daniel Jeremiah is a former NFL scot and current NFL Network analyst who posts his ideas on the top 50 prospects in the NFL draft every year. This project will analyze the relationship between his scouting reports and the actual draft results to see how well his words hold up.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="G:/My%20Drive/Py%20Projects/nfl-draft-preview/vizzes/jeremiah-tweet.png" class="img-fluid figure-img"></p>
<figcaption>Tweet from Daniel Jeremiah</figcaption>
</figure>
</div>
</section>
<section id="primary-question" class="level2">
<h2 class="anchored" data-anchor-id="primary-question">Primary Question</h2>
<p>The main question this project will answer is this: Can a single person’s work accurately predict the likelihood of a player going in the first round of the NFL draft? Daniel Jeremiah is the subject of this project due to his status as an NFL Network analyst and the availability of his past scouting reports.</p>
</section>
<section id="scraping-and-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="scraping-and-cleaning">Scraping and Cleaning</h2>
<p>In order to perform analysis on Jeremiah’s statements, they first need to be scraped from the NFL website. For this project his Top 50 prospects from 2020-2025 were scraped and cleaned, then saved into a csv file.</p>
<div id="2dad641a" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Daniel Jeremiah Top 50 2020</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://www.nfl.com/news/daniel-jeremiah-s-top-50-2020-nfl-draft-prospect-rankings-2-0-0ap3000001102767'</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape and process</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>soup_20 <span class="op">=</span> BeautifulSoup(response.text, <span class="st">'html.parser'</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>top_50_2020 <span class="op">=</span> soup_20.select(<span class="st">'.nfl-c-article__container'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>article_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2020))</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>top_50_2020 <span class="op">=</span> [top_50_2020[x].text <span class="cf">for</span> x <span class="kw">in</span> article_range]</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>df_2020 <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">'Name'</span>, <span class="st">'Position'</span>, <span class="st">'School'</span>, <span class="st">'Report'</span>])</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull data into dataframe</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">52</span>):</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> re.findall(<span class="vs">r'\d+\)\s([A-Za-z\s\.\',\-]+),'</span>, top_50_2020[i])[<span class="dv">0</span>]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> re.findall(<span class="vs">r'(?&lt;=, ).*'</span>, top_50_2020[i])[<span class="dv">0</span>]</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    school <span class="op">=</span> re.findall(<span class="vs">r'(?&lt;=: ).* (?=[|])'</span>, top_50_2020[i])[<span class="dv">0</span>]</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    report <span class="op">=</span> <span class="bu">max</span>(re.findall(<span class="vs">r'(?&lt;=[\n\n]).*'</span>, top_50_2020[i]), key<span class="op">=</span><span class="bu">len</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    df_2020.loc[<span class="bu">len</span>(df_2020)] <span class="op">=</span> {<span class="st">'Name'</span>: name, <span class="st">'Position'</span>: position, <span class="st">'School'</span>: school, <span class="st">'Report'</span>: report}</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape Daniel Jeremiah Top 50 2021</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://www.nfl.com/news/daniel-jeremiah-s-top-50-2021-nfl-draft-prospect-rankings-3-0'</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape and process</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>soup_21 <span class="op">=</span> BeautifulSoup(requests.get(url).text, <span class="st">'html.parser'</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>top_50_2021_info <span class="op">=</span> soup_21.select(<span class="st">'.nfl-o-ranked-item__content'</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>top_50_2021_report <span class="op">=</span> soup_21.select(<span class="st">'.nfl-c-body-part--text'</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>article_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2021))</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>report_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2021_report))</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>top_50_2021_info <span class="op">=</span> [top_50_2021[x].text <span class="cf">for</span> x <span class="kw">in</span> article_range]</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>top_50_2021_report <span class="op">=</span> [top_50_2021_report[x].text <span class="cf">for</span> x <span class="kw">in</span> report_range]</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>df_2021 <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">'Name'</span>, <span class="st">'Position'</span>, <span class="st">'School'</span>, <span class="st">'Report'</span>])</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull info into dataframe</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">50</span>):</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> re.findall(<span class="vs">r'([A-Za-z\s\.\',\-]+)\n\n'</span>, top_50_2021_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> re.findall(<span class="vs">r'·\s*([^·]+)\s* ·'</span>, top_50_2021_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    school <span class="op">=</span> re.findall(<span class="vs">r'\n\s*([^\n\r·]+)\s*·'</span>, top_50_2021_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    df_2021.loc[<span class="bu">len</span>(df_2021)] <span class="op">=</span> {<span class="st">'Name'</span>: name, <span class="st">'Position'</span>: position, <span class="st">'School'</span>: school, <span class="st">'Report'</span>: top_50_2021_report[i <span class="op">+</span> <span class="dv">1</span>]}</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean dataframe</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>df_2021[<span class="st">'Report'</span>] <span class="op">=</span> df_2021[<span class="st">'Report'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>df_2021[<span class="st">'Name'</span>] <span class="op">=</span> df_2021[<span class="st">'Name'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape Daniel Jeremiah Top 50 2022</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://www.nfl.com/news/daniel-jeremiah-s-top-50-2022-nfl-draft-prospect-rankings-3-0'</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape and process</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>soup_22 <span class="op">=</span> BeautifulSoup(requests.get(url).text, <span class="st">'html.parser'</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>top_50_2022_info <span class="op">=</span> soup_22.select(<span class="st">'.nfl-o-ranked-item__content'</span>)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>top_50_2022_report <span class="op">=</span> soup_22.select(<span class="st">'.nfl-c-body-part--text'</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>article_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2022_info))</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>report_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2022_report))</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>top_50_2022_info <span class="op">=</span> [top_50_2022_info[x].text <span class="cf">for</span> x <span class="kw">in</span> article_range]</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>top_50_2022_report <span class="op">=</span> [top_50_2022_report[x].text <span class="cf">for</span> x <span class="kw">in</span> report_range]</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>df_2022 <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">'Name'</span>, <span class="st">'Position'</span>, <span class="st">'School'</span>, <span class="st">'Report'</span>])</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull info into dataframe</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">50</span>):</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> re.findall(<span class="vs">r'([A-Za-z\s\.\',\-]+)\n\n'</span>, top_50_2022_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> re.findall(<span class="vs">r'·\s*([^·]+)\s* ·'</span>, top_50_2022_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    school <span class="op">=</span> re.findall(<span class="vs">r'\n\s*([^\n\r·]+)\s*·'</span>, top_50_2022_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    df_2022.loc[<span class="bu">len</span>(df_2022)] <span class="op">=</span> {<span class="st">'Name'</span>: name, <span class="st">'Position'</span>: position, <span class="st">'School'</span>: school, <span class="st">'Report'</span>: top_50_2022_report[i <span class="op">+</span> <span class="dv">1</span>]}</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean dataframe</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>df_2022[<span class="st">'Report'</span>] <span class="op">=</span> df_2022[<span class="st">'Report'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>df_2022[<span class="st">'Name'</span>] <span class="op">=</span> df_2022[<span class="st">'Name'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape Daniel Jeremiah Top 50 2023</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://www.nfl.com/news/daniel-jeremiah-s-top-50-2023-nfl-draft-prospect-rankings-4-0'</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape and process</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>soup_23 <span class="op">=</span> BeautifulSoup(requests.get(url).text, <span class="st">'html.parser'</span>)</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>top_50_2023_info <span class="op">=</span> soup_23.select(<span class="st">'.nfl-o-ranked-item__content'</span>)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>top_50_2023_report <span class="op">=</span> soup_23.select(<span class="st">'.nfl-c-body-part--text'</span>)</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>article_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2023_info))</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>report_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2023_report))</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>top_50_2023_info <span class="op">=</span> [top_50_2023_info[x].text <span class="cf">for</span> x <span class="kw">in</span> article_range]</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>top_50_2023_report <span class="op">=</span> [top_50_2023_report[x].text <span class="cf">for</span> x <span class="kw">in</span> report_range]</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>df_2023 <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">'Name'</span>, <span class="st">'Position'</span>, <span class="st">'School'</span>, <span class="st">'Report'</span>])</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull info into dataframe</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">50</span>):</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> re.findall(<span class="vs">r'([A-Za-z\s\.\',\-]+)\n\n'</span>, top_50_2023_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> re.findall(<span class="vs">r'·\s*([^·]+)\s* ·'</span>, top_50_2023_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    school <span class="op">=</span> re.findall(<span class="vs">r'\n\s*([^\n\r·]+)\s*·'</span>, top_50_2023_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    df_2023.loc[<span class="bu">len</span>(df_2023)] <span class="op">=</span> {<span class="st">'Name'</span>: name, <span class="st">'Position'</span>: position, <span class="st">'School'</span>: school, <span class="st">'Report'</span>: top_50_2023_report[i <span class="op">+</span> <span class="dv">1</span>]}</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean dataframe</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>df_2023[<span class="st">'Report'</span>] <span class="op">=</span> df_2023[<span class="st">'Report'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>df_2023[<span class="st">'Name'</span>] <span class="op">=</span> df_2023[<span class="st">'Name'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape Daniel Jeremiah Top 150 2024</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://www.nfl.com/news/daniel-jeremiah-s-top-150-prospects-in-the-2024-nfl-draft-class'</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape and process</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>soup_24 <span class="op">=</span> BeautifulSoup(requests.get(url).text, <span class="st">'html.parser'</span>)</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>top_150_2024_info <span class="op">=</span> soup_24.select(<span class="st">'.nfl-o-ranked-item__content'</span>)</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>top_150_2024_report <span class="op">=</span> soup_24.select(<span class="st">'.nfl-c-body-part--text'</span>)</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>article_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_150_2024_info))</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>report_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_150_2024_report))</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>top_150_2024_info <span class="op">=</span> [top_150_2024_info[x].text <span class="cf">for</span> x <span class="kw">in</span> article_range]</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>top_150_2024_report <span class="op">=</span> [top_150_2024_report[x].text <span class="cf">for</span> x <span class="kw">in</span> report_range]</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>df_2024 <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">'Name'</span>, <span class="st">'Position'</span>, <span class="st">'School'</span>, <span class="st">'Report'</span>])</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull info into dataframe</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">50</span>):</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> re.findall(<span class="vs">r'([A-Za-z\s\.\',\-]+)\n\n'</span>, top_150_2024_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> re.findall(<span class="vs">r'·\s*([^·]+)\s* ·'</span>, top_150_2024_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    school <span class="op">=</span> re.findall(<span class="vs">r'\n\s*([^\n\r·]+)\s*·'</span>, top_150_2024_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>    df_2024.loc[<span class="bu">len</span>(df_2024)] <span class="op">=</span> {<span class="st">'Name'</span>: name, <span class="st">'Position'</span>: position, <span class="st">'School'</span>: school, <span class="st">'Report'</span>: top_150_2024_report[i <span class="op">+</span> <span class="dv">3</span>]}</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean dataframe</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>df_2024[<span class="st">'Report'</span>] <span class="op">=</span> df_2024[<span class="st">'Report'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>df_2024[<span class="st">'Name'</span>] <span class="op">=</span> df_2024[<span class="st">'Name'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape Daniel Jeremiah Top 50 2025</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://www.nfl.com/news/daniel-jeremiah-s-top-50-2025-nfl-draft-prospect-rankings-1-0'</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape and process</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>soup_25 <span class="op">=</span> BeautifulSoup(requests.get(url).text, <span class="st">'html.parser'</span>)</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>top_50_2025_info <span class="op">=</span> soup_25.select(<span class="st">'.nfl-o-ranked-item__content'</span>)</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>top_50_2025_report <span class="op">=</span> soup_25.select(<span class="st">'.nfl-c-body-part--text'</span>)</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>article_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2025_info))</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>report_range <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(top_50_2025_report))</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>top_50_2025_info <span class="op">=</span> [top_50_2025_info[x].text <span class="cf">for</span> x <span class="kw">in</span> article_range]</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>top_50_2025_report <span class="op">=</span> [top_50_2025_report[x].text <span class="cf">for</span> x <span class="kw">in</span> report_range]</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>df_2025 <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">'Name'</span>, <span class="st">'Position'</span>, <span class="st">'School'</span>, <span class="st">'Report'</span>])</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull info into dataframe</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">50</span>):</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> re.findall(<span class="vs">r'([A-Za-z\s\.\',\-]+)\n\n'</span>, top_50_2025_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> re.findall(<span class="vs">r'·\s*([^·]+)\s* ·'</span>, top_50_2025_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>    school <span class="op">=</span> re.findall(<span class="vs">r'\n\s*([^\n\r·]+)\s*·'</span>, top_50_2025_info[i])[<span class="dv">0</span>]</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>    df_2025.loc[<span class="bu">len</span>(df_2025)] <span class="op">=</span> {<span class="st">'Name'</span>: name, <span class="st">'Position'</span>: position, <span class="st">'School'</span>: school, <span class="st">'Report'</span>: top_50_2025_report[i <span class="op">+</span> <span class="dv">3</span>]}</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean dataframe</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>df_2025[<span class="st">'Report'</span>] <span class="op">=</span> df_2025[<span class="st">'Report'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>df_2025[<span class="st">'Name'</span>] <span class="op">=</span> df_2025[<span class="st">'Name'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Save dataframes</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="co">#df_2020.to_csv('data/scoutingreports/jeremiah_2020.csv', index=False)</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="co">#df_2021.to_csv('data/scoutingreports/jeremiah_2021.csv', index=False)</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="co">#df_2022.to_csv('data/scoutingreports/jeremiah_2022.csv', index=False)</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a><span class="co">#df_2023.to_csv('data/scoutingreports/jeremiah_2023.csv', index=False)</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a><span class="co">#df_2024.to_csv('data/scoutingreports/jeremiah_2024.csv', index=False)</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a><span class="co">#df_2025.to_csv('data/scoutingreports/jeremiah_2025.csv', index=False)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In order to properly perform text analysis on these reports, the text needs to be properly cleaned and tokenized. The stopwords used to clean the data were scraped from the SMART Stopwords.</p>
<div id="e94d899a" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Link to SMART stopwords</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'http://www.ai.mit.edu/projects/jmlr/papers/volume5/lewis04a/a11-smart-stop-list/english.stop'</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page and convert it to a BeautifulSoup object</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">'html.parser'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert soup to a list</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>stopwords <span class="op">=</span> soup.get_text().split()</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dataframe and save to CSV</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>stopwords_df <span class="op">=</span> pd.DataFrame(stopwords, columns<span class="op">=</span>[<span class="st">'stopword'</span>])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#stopwords_df.to_csv('data/stopwords.csv', index=False)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Now that the data has been scraped and the stopwords are ready, the next step is to perform text analysis on the reports. The first step is to clean the text and remove stopwords. The next step is to tokenize the text and count the frequency of each word.</p>
<div id="4729a437" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.stem <span class="im">import</span> WordNetLemmatizer</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xgboost <span class="im">as</span> xgb</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split, RandomizedSearchCV, GridSearchCV</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score, confusion_matrix, ConfusionMatrixDisplay</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dalex <span class="im">as</span> dx</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shap</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>first_rounders <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/2020_to_2024_first_rounders.csv'</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>report_20 <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2020.csv'</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>report_21 <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2021.csv'</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>report_22 <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2022.csv'</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>report_23 <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2023.csv'</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>report_24 <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2024.csv'</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>report_25 <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2025.csv'</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>stopwords <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/stopwords.csv'</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine reports</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>reports_past <span class="op">=</span> pd.concat([report_20, report_21, report_22, report_23, report_24])</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy first rounders</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>reports_past[<span class="st">'first_rounder'</span>] <span class="op">=</span> reports_past[<span class="st">'Name'</span>].isin(first_rounders[<span class="st">'Player'</span>]).astype(<span class="bu">int</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Lemmatize first</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>w_tokenizer <span class="op">=</span> nltk.tokenize.WhitespaceTokenizer()</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>lemmatizer <span class="op">=</span> nltk.stem.WordNetLemmatizer()</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lemmatize_text(text):</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [lemmatizer.lemmatize(word) <span class="cf">for</span> word <span class="kw">in</span> w_tokenizer.tokenize(text)]</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>reports_past[<span class="st">'report_lemmatized'</span>] <span class="op">=</span> reports_past[<span class="st">'Report'</span>].<span class="bu">apply</span>(lemmatize_text)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove stopwords</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>reports_past[<span class="st">'report_lemmatized'</span>] <span class="op">=</span> reports_past[<span class="st">'report_lemmatized'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [item <span class="cf">for</span> item <span class="kw">in</span> x <span class="cf">if</span> item <span class="kw">not</span> <span class="kw">in</span> stopwords[<span class="st">'stopword'</span>].values])</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Define dataframe</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>xgb_df <span class="op">=</span> reports_past[[<span class="st">'report_lemmatized'</span>, <span class="st">'first_rounder'</span>]].copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After this I convert the text into a format that can be used in a machine learning model. The TfidfVectorizer will be used to convert the text into a matrix of TF-IDF features.</p>
<div id="8d3aca3f" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert text to TF-IDF features</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tfidf_matrix <span class="op">=</span> vectorizer.fit_transform(xgb_df[<span class="st">'report_lemmatized'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">' '</span>.join(x)))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure output is interpretable</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>feature_names <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df_tfidf <span class="op">=</span> pd.DataFrame(tfidf_matrix.toarray(), columns<span class="op">=</span>feature_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once this is done, the data is ready to be set up for model training. Once this is done we can train the model and see how well it performs initially.</p>
<div id="433c1cb8" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># INITIAL XGBoost classifier</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>xgb_clf <span class="op">=</span> xgb.XGBClassifier(objective<span class="op">=</span><span class="st">'binary:logistic'</span>, random_state<span class="op">=</span><span class="dv">102701</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Split data</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(df_tfidf, xgb_df[<span class="st">'first_rounder'</span>], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">102701</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit to training data</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>xgb_clf.fit(X_train, y_train)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create basic predictions</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> xgb_clf.predict(X_test)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>initial_accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check confusion matrix  to see where the model struggles</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>conf_matrix <span class="op">=</span> confusion_matrix(y_test, y_pred)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>cm_display <span class="op">=</span> ConfusionMatrixDisplay(conf_matrix).plot()</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="scouting-predictability_files/figure-html/cell-6-output-1.png" width="496" height="434" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The initial accuracy of the model is 48.0%. This is a good starting point, but the model can be further tuned to improve accuracy.</p>
<p>After this, the model can be tuned to find the best hyperparameters.</p>
<div id="16471a5c" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split validation set from training set</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>X_train, X_val, y_train, y_val <span class="op">=</span> train_test_split(X_train, y_train, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">102701</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit model to training data for tuning</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>eval_metrics <span class="op">=</span> [<span class="st">'auc'</span>, <span class="st">'error'</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>model_1 <span class="op">=</span> xgb.XGBClassifier(learning_rate <span class="op">=</span> <span class="fl">0.1</span>, n_estimators <span class="op">=</span> <span class="dv">500</span>, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                            random_state <span class="op">=</span> <span class="dv">102701</span>, early_stopping_rounds <span class="op">=</span> <span class="dv">10</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                            eval_metric<span class="op">=</span>eval_metrics, objective<span class="op">=</span><span class="st">'binary:logistic'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>eval_set <span class="op">=</span>[(X_train, y_train), (X_val, y_val)]</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>model_1.fit(X_train, y_train, eval_set<span class="op">=</span>eval_set, verbose<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract evaluation results</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>eval_results <span class="op">=</span> model_1.evals_result()</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph error vs. number of iterations</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>epochs <span class="op">=</span> <span class="bu">len</span>(eval_results[<span class="st">'validation_1'</span>][<span class="st">'error'</span>])</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>x_axis <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, epochs)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>plt.plot(x_axis, eval_results[<span class="st">'validation_0'</span>][<span class="st">'error'</span>], label <span class="op">=</span> <span class="ss">f'Learning Rate: </span><span class="sc">{</span><span class="fl">0.01</span><span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Error'</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Iterations'</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'XGBoost Error vs. Iterations'</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up tuning grid</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {  </span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max_depth'</span>: [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span>],</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min_child_weight'</span>: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">10</span>],</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">'learning_rate'</span>: [<span class="fl">0.1</span>], </span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'n_estimators'</span>: [<span class="dv">100</span>], </span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">'subsample'</span>: [<span class="fl">1.0</span>],</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">'colsample_bytree'</span>: [<span class="fl">1.0</span>], </span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">'reg_alpha'</span>: [<span class="fl">1e-5</span>],</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">'early_stopping_rounds'</span>:[<span class="dv">10</span>],</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">'scale_pos_weight'</span>: [<span class="fl">0.5626</span>],</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up grid search</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    estimator <span class="op">=</span> xgb_clf,</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>    param_grid <span class="op">=</span> param_grid,</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>    scoring <span class="op">=</span> <span class="st">'accuracy'</span>,</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    n_jobs <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    cv <span class="op">=</span> <span class="dv">5</span>,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    verbose <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit grid search</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train, y_train, eval_set<span class="op">=</span>eval_set, verbose<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract best parameters</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>best_params <span class="op">=</span> grid_search.best_params_</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>best_score <span class="op">=</span> grid_search.best_score_</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Best parameters: </span><span class="sc">{</span>best_params<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Best cross-validation score: </span><span class="sc">{</span>best_score<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Tune subsample and colsample_bytree</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max_depth'</span>: [<span class="dv">10</span>],</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min_child_weight'</span>: [<span class="dv">1</span>],</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>    <span class="st">'learning_rate'</span>: [<span class="fl">0.1</span>], </span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>    <span class="st">'n_estimators'</span>: [<span class="dv">100</span>], </span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>    <span class="st">'subsample'</span>: [<span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">1.0</span>],</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>    <span class="st">'colsample_bytree'</span>: [<span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">1.0</span>], </span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>    <span class="st">'reg_alpha'</span>: [<span class="fl">1e-5</span>],</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>    <span class="st">'early_stopping_rounds'</span>:[<span class="dv">10</span>],</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>    <span class="st">'scale_pos_weight'</span>: [<span class="fl">0.5625</span>],</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up grid search</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>    estimator <span class="op">=</span> xgb_clf,</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>    param_grid <span class="op">=</span> param_grid,</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>    scoring <span class="op">=</span> <span class="st">'accuracy'</span>,</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>    n_jobs <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>    cv <span class="op">=</span> <span class="dv">5</span>,</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>    verbose <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit grid search</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train, y_train, eval_set<span class="op">=</span>eval_set, verbose<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract best parameters</span></span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>best_params <span class="op">=</span> grid_search.best_params_</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>best_score <span class="op">=</span> grid_search.best_score_</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Best parameters: </span><span class="sc">{</span>best_params<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Best cross-validation score: </span><span class="sc">{</span>best_score<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Tune reg_alpha</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>    <span class="st">'max_depth'</span>: [<span class="dv">10</span>],</span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>    <span class="st">'min_child_weight'</span>: [<span class="dv">1</span>],</span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>    <span class="st">'learning_rate'</span>: [<span class="fl">0.1</span>], </span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>    <span class="st">'n_estimators'</span>: [<span class="dv">100</span>], </span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>    <span class="st">'subsample'</span>: [<span class="fl">1.0</span>],</span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>    <span class="st">'colsample_bytree'</span>: [<span class="fl">0.75</span>], </span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>    <span class="st">'reg_alpha'</span>: [<span class="fl">1e-5</span>, <span class="fl">1e-2</span>, <span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">100</span>],</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>    <span class="st">'early_stopping_rounds'</span>:[<span class="dv">10</span>],</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>    <span class="st">'scale_pos_weight'</span>: [<span class="fl">0.5625</span>],</span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up grid search</span></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(</span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>    estimator <span class="op">=</span> xgb_clf,</span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>    param_grid <span class="op">=</span> param_grid,</span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>    scoring <span class="op">=</span> <span class="st">'accuracy'</span>,</span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>    n_jobs <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a>    cv <span class="op">=</span> <span class="dv">5</span>,</span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>    verbose <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit grid search</span></span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train, y_train, eval_set<span class="op">=</span>eval_set, verbose<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract best parameters</span></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>best_params <span class="op">=</span> grid_search.best_params_</span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>best_score <span class="op">=</span> grid_search.best_score_</span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Best parameters: </span><span class="sc">{</span>best_params<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Best cross-validation score: </span><span class="sc">{</span>best_score<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a><span class="co"># Tune learning rates</span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>learning_rates <span class="op">=</span> [<span class="fl">0.0005</span>, <span class="fl">0.001</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>, <span class="fl">0.03</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>]</span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>eval_results <span class="op">=</span> {}</span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lr <span class="kw">in</span> learning_rates:</span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> xgb.XGBClassifier(learning_rate <span class="op">=</span> lr, n_estimators <span class="op">=</span> <span class="dv">500</span>,</span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>                            random_state <span class="op">=</span> <span class="dv">102701</span>, early_stopping_rounds <span class="op">=</span> <span class="dv">100</span>,</span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>                            eval_metric<span class="op">=</span>eval_metrics, objective<span class="op">=</span><span class="st">'binary:logistic'</span>)</span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a>    eval_set <span class="op">=</span>[(X_train, y_train), (X_val, y_val)]</span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>    model.fit(X_train, y_train, eval_set<span class="op">=</span>eval_set, verbose<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a>    eval_results[<span class="ss">f'lr_</span><span class="sc">{</span>lr<span class="sc">}</span><span class="ss">'</span>] <span class="op">=</span> model.evals_result()</span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot learning rate results</span></span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lr, result <span class="kw">in</span> eval_results.items():</span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>    epochs <span class="op">=</span> <span class="bu">len</span>(result[<span class="st">'validation_1'</span>][<span class="st">'error'</span>])</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a>    x_axis <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, epochs)</span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>    plt.plot(x_axis, result[<span class="st">'validation_1'</span>][<span class="st">'error'</span>], label <span class="op">=</span> <span class="ss">f'Learning Rate: </span><span class="sc">{</span>lr<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Error'</span>)</span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Iterations'</span>)</span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'XGBoost Error vs. Iterations for Varying Learning Rates'</span>)</span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>plt.show()    </span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a><span class="co"># Final tuned model</span></span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>xgb_final <span class="op">=</span> xgb.XGBClassifier(max_depth <span class="op">=</span> <span class="dv">10</span>, min_child_weight <span class="op">=</span> <span class="dv">1</span>, learning_rate <span class="op">=</span> <span class="fl">0.01</span>, </span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a>                              n_estimators <span class="op">=</span> <span class="dv">100</span>, subsample <span class="op">=</span> <span class="fl">1.0</span>, colsample_bytree <span class="op">=</span> <span class="fl">0.75</span>, </span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>                              reg_alpha <span class="op">=</span> <span class="fl">0.1</span>, early_stopping_rounds <span class="op">=</span> <span class="dv">10</span>, </span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a>                              scale_pos_weight <span class="op">=</span> <span class="fl">0.5625</span>, objective<span class="op">=</span><span class="st">'binary:logistic'</span>, </span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>                              random_state<span class="op">=</span><span class="dv">102701</span>)</span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit model</span></span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>xgb_final.fit(X_train, y_train, eval_set<span class="op">=</span>[(X_val, y_val)], verbose<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on test set</span></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> xgb_final.predict(X_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e7bc15f9" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate accuracy</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The accuracy for the tuned model is 54.0%.</p>
<p>The now tuned model can be used to predict the likelihood of a player going in the first round based on their scouting report for the 2025 class.</p>
<div id="c8e40f02" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply to 2025 prospects</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>report_25[<span class="st">'report_lemmatized'</span>] <span class="op">=</span> report_25[<span class="st">'Report'</span>].<span class="bu">apply</span>(lemmatize_text)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>report_25[<span class="st">'report_lemmatized'</span>] <span class="op">=</span> report_25[<span class="st">'report_lemmatized'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [item <span class="cf">for</span> item <span class="kw">in</span> x <span class="cf">if</span> item <span class="kw">not</span> <span class="kw">in</span> stopwords[<span class="st">'stopword'</span>].values])</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert text to TF-IDF features</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>tfidf_matrix_25 <span class="op">=</span> vectorizer.transform(report_25[<span class="st">'report_lemmatized'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">' '</span>.join(x)))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure output is interpretable</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>df_tfidf_25 <span class="op">=</span> pd.DataFrame(tfidf_matrix_25.toarray(), columns<span class="op">=</span>vectorizer.get_feature_names_out())</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict probabilities on 2025 prospects</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>xgb_preds_proba <span class="op">=</span> xgb_final.predict_proba(df_tfidf_25)[:, <span class="dv">1</span>]</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Add predictions to the dataframe</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>report_25[<span class="st">'first_rounder_proba'</span>] <span class="op">=</span> xgb_preds_proba</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Rank prospects by likelihood of being a first rounder</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>report_25_ranked <span class="op">=</span> report_25.sort_values(by<span class="op">=</span><span class="st">'first_rounder_proba'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>Now that the heavy lifting is done from building the model, the results are ready to be interpreted. The idea here is that this model can be used to predict the likelihood of a player going in the first round based on their scouting report. Perhaps unsurprisingly, the results may not look exactly how we expected them to.</p>
<div id="1d0f4f7a" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the ranked prospects</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ranked <span class="op">=</span> pd.read_csv(<span class="st">'G:/My Drive/Py Projects/nfl-draft-preview/data/scoutingreports/jeremiah_2025_ranked.csv'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ranked.to_markdown())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>|    | Name               |   first_rounder_proba |
|---:|:-------------------|----------------------:|
|  0 | T.J. Sanders       |              0.500306 |
|  1 | Travis Hunter      |              0.487165 |
|  2 | Jihaad Campbell    |              0.480641 |
|  3 | Kenneth Grant      |              0.473475 |
|  4 | Armand Membou      |              0.4574   |
|  5 | Benjamin Morrison  |              0.454257 |
|  6 | Josh Simmons       |              0.447684 |
|  7 | Carson Schwesinger |              0.447075 |
|  8 | Will Campbell      |              0.440519 |
|  9 | Matthew Golden     |              0.437669 |
| 10 | Shedeur Sanders    |              0.432644 |
| 11 | James Pearce Jr.   |              0.425554 |
| 12 | Maxwell Hairston   |              0.425449 |
| 13 | TreVeyon Henderson |              0.416668 |
| 14 | Derrick Harmon     |              0.414875 |
| 15 | Kelvin Banks Jr.   |              0.413913 |
| 16 | Marcus Mbow        |              0.413502 |
| 17 | Jalon Walker       |              0.401993 |
| 18 | Ashton Jeanty      |              0.400626 |
| 19 | Luther Burden III  |              0.39296  |
| 20 | Tyler Booker       |              0.387092 |
| 21 | Josaiah Stewart    |              0.381088 |
| 22 | Emeka Egbuka       |              0.379159 |
| 23 | Nick Emmanwori     |              0.377785 |
| 24 | Will Johnson       |              0.376144 |
| 25 | Donovan Ezeiruaku  |              0.376083 |
| 26 | Mike Green         |              0.373362 |
| 27 | Colston Loveland   |              0.368582 |
| 28 | Jack Sawyer        |              0.36807  |
| 29 | Cam Ward           |              0.364048 |
| 30 | Joshua Farmer      |              0.362807 |
| 31 | Omarion Hampton    |              0.357396 |
| 32 | Tetairoa McMillan  |              0.357001 |
| 33 | Grey Zabel         |              0.356309 |
| 34 | Azareye'h Thomas   |              0.354896 |
| 35 | Shemar Stewart     |              0.353331 |
| 36 | Mykel Williams     |              0.353165 |
| 37 | Elijah Arroyo      |              0.3512   |
| 38 | Mason Graham       |              0.350768 |
| 39 | Josh Conerly Jr.   |              0.350471 |
| 40 | Donovan Jackson    |              0.350066 |
| 41 | Malaki Starks      |              0.348301 |
| 42 | Jaxson Dart        |              0.340907 |
| 43 | Jahdae Barron      |              0.340761 |
| 44 | Walter Nolen       |              0.334408 |
| 45 | Tyler Warren       |              0.33411  |
| 46 | Alfred Collins     |              0.32853  |
| 47 | Abdul Carter       |              0.315731 |
| 48 | Quinshon Judkins   |              0.303585 |
| 49 | Mason Taylor       |              0.295869 |</code></pre>
</div>
</div>
<p>Now that we know how the model feels about the 2025 prospects, it is important to remember that this is just one model and one person’s opinion. Fully tuned the model was still only 54% accurate. Despite this, the importance of machine learning interpretability cannot be understated, so let’s take a look at the SHAP values to see what the model is thinking.</p>
<div id="6638b801" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get SHAP values</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>explainer <span class="op">=</span> shap.Explainer(xgb_final)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>shap_values <span class="op">=</span> explainer(df_tfidf_25)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Show top 10 SHAP values</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>shap.summary_plot(shap_values, df_tfidf_25, plot_type<span class="op">=</span><span class="st">"bar"</span>, max_display<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot beeswarm</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>shap.plots.beeswarm(shap_values)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Waterfall for T.J. Sanders</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>shap.plots.waterfall(shap_values[<span class="dv">41</span>])</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Waterfall for Travis Hunter</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>shap.plots.waterfall(shap_values[<span class="dv">1</span>])</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Waterfall for Abdul Carter</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>shap.plots.waterfall(shap_values[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="G:/My%20Drive/Py%20Projects/nfl-draft-preview/vizzes/report-beeswarm-v1.jpeg" class="img-fluid figure-img"></p>
<figcaption>Beeswarm Visualization of SHAP values</figcaption>
</figure>
</div>
<p>The model assigns high values of “starter”, “move”, and “overall” with a negative impact on the likelihood of being a first rounder. These words may be tough to interpret in this scenario. Moving down, higher values of slot is also associated with lower first-round likelihood. A “slot” reciever is a player who lines up in the slot position, which is between the offensive line and the outside receiver. This position is typically not as highly valued as the outside receiver position, which may explain the negative impact on the likelihood of being a first rounder. As expected, higher values of “size”, “tackle”, and “quickness” are associated with a higher likelihood of being a first rounder. These are all attributes that are highly valued in the NFL.</p>
<p>Next, let’s take a look at some interesting player cases and see why the model attributed the probability that it did to them. First up, T.J. Sanders.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="G:/My%20Drive/Py%20Projects/nfl-draft-preview/vizzes/sanders-waterfall-v1.jpeg" class="img-fluid figure-img"></p>
<figcaption>Waterfall Visualization of Important Features influencing T.J. Sanders</figcaption>
</figure>
</div>
<p>As previously stated, the words “starter” and “move” negatively impact a player’s likelihood of being a first rounder. In Sanders’ case, these words do not appear in his scouting report, leading to them greatly impacting his first-round likelihood. The words “blocks”, “explosive”, and “tackle” all appear in his report with a positive impact.</p>
<p>The next player to inspect is Travis Hunter.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="G:/My%20Drive/Py%20Projects/nfl-draft-preview/vizzes/hunter-waterfall-v1.jpeg" class="img-fluid figure-img"></p>
<figcaption>Waterfall Visualization of Important Features influencing Travis Hunter</figcaption>
</figure>
</div>
<p>Just like Sanders, Hunter does not have the words “starter” or “move” in his report. For anyone who has kept up with college football discourse in 2024, one of Hunter’s greatest attributes is his ability to play both sides of the ball. This is reflected in the word “time” having a positive value and one of the highest impacts on his first-round likelihood.</p>
<p>Finally, let’s take a look at Abdul Carter. Carter is widely considered as one of the best prospects in this class, but the model has him very low on the first-round likelihood list. Let’s inspect why.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="G:/My%20Drive/Py%20Projects/nfl-draft-preview/vizzes/carter-waterfall-v1.jpeg" class="img-fluid figure-img"></p>
<figcaption>Waterfall Visualization of Important Features influencing Abdul Carter</figcaption>
</figure>
</div>
<p>When looking at this graph, the high negative impact of the word “move” jumps off the screen. Carter’s ability to move between positions on the defense, whether on the line or as a linebacker, is a key part of his game. The model interprets “move” as a negative attribute, which is likely why Carter is so low on the first-round likelihood list.</p>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>At the end of the day, Insiders like Jeremiah are paid for their ability to generate buzz and “clicks”. As far as I know they do not voice their opinions on players so that people can run Machine Learning models on them but that is exactly what I did. The low model accuracy and the negative impact of certain words on a player’s likelihood of being a first rounder show that the model may not be the best way to predict a player’s draft position. However, the SHAP values show that the model is able to pick up on certain attributes that are highly valued in the NFL, such as size and quickness. The main takeaway from this project is that while scouting reports may be interesting to read and generate buzz, they may not be the best way to predict a player’s draft position.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>